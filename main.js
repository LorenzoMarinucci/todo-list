!function(e){var t={};function o(n){if(t[n])return t[n].exports;var d=t[n]={i:n,l:!1,exports:{}};return e[n].call(d.exports,d,d.exports,o),d.l=!0,d.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var d in e)o.d(n,d,function(t){return e[t]}.bind(null,d));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="dist",o(o.s=0)}([function(e,t,o){"use strict";o.r(t);var n=function(e){return e.todos||(e.todos=[]),e.name||(e.name="My Project"),{todos:e.todos,name:e.name,description:e.description}};var d=function(e,t=!1){return e.name||(e.name="Todo"),{name:e.name,priority:e.priority,dueDate:e.dueDate,description:e.description,done:t}};var r=function(){const e=function(e,o){for(;e.firstChild;)e.firstChild.remove();o.todos.length>0&&o.todos.forEach((o,n)=>{let d=document.createElement("div");d.classList.add("todo"),d.setAttribute("data-index",n),t(o,d),e.appendChild(d)})},t=(e,t)=>{for(;t.firstChild;)t.firstChild.remove();let o=document.createElement("div");o.classList.add("todoHeader");let n,d=document.createElement("h3");switch(e.priority){case"High":n="red";break;case"Low":n="green";break;case"Medium":n="yellow";break;default:n="grey"}d.innerHTML=`<span class="dot ${n}"></span> ${e.name}`,o.appendChild(d);let r=document.createElement("div");r.classList.add("buttons");let i=e.done?' checked="checked"':"",a=null==e.expand||1==e.expand?"up":"down";r.innerHTML=`<label class="container"><input type="checkbox"${i} /><span class="checkmark"></span></label><div class="todoOptions"><img class="edit" src="images/edit.png" /><img class="delete" src="images/delete.png" /></div></div><i class="${a}" class="showTodo"></i>`,o.appendChild(d),o.appendChild(r);let l=document.createElement("h4");if(l.textContent=`Due: ${e.dueDate}`,t.appendChild(o),t.appendChild(l),null==e.expand||1==e.expand){e.expand=!0;let o=document.createElement("h4");o.textContent=`Priority: ${e.priority}`;let n=document.createElement("p");n.classList.add("description"),n.textContent=e.description,t.appendChild(o),t.appendChild(n)}};return{renderProjects:function(e,t){for(;e.firstChild;)e.firstChild.remove();t.forEach((t,o)=>{let n=document.createElement("h2");n.textContent=`${t.name}`;let d=document.createElement("div");d.classList.add("project"),d.setAttribute("data-index",o),d.appendChild(n),e.appendChild(d)})},renderTodosContainer:function(t,o){for(;t.firstChild;)t.firstChild.remove();let n=document.createElement("div");n.id="todosHeader";let d=document.createElement("h2");d.textContent=`${o.name}`,n.appendChild(d);let r=document.createElement("p");r.id="projectDescription",r.textContent=o.description,n.appendChild(r);let i=document.createElement("div");e(i,o),i.id="todoList";let a=document.createElement("div"),l=document.createElement("button");l.textContent="Edit Project";let c=document.createElement("button");c.textContent="Delete Project";let s=document.createElement("button");s.textContent="Add Todo",l.id="editProject",c.id="deleteProject",s.id="addTodo",a.appendChild(l),a.appendChild(c),a.appendChild(s),a.id="projectButtons",t.appendChild(n),t.appendChild(document.createElement("hr")),t.appendChild(i),t.appendChild(document.createElement("hr")),t.appendChild(a)},renderTodos:e,showProjectForm:()=>{let e=document.querySelector("body"),t=document.createElement("div");t.id="formBackground",t.innerHTML='<div id="projectForm">        <form action="">          <label for="name">Project name</label>          <input type="text" id="name" />          <label for="description">Project description</label>          <textarea id="description"></textarea>        </form>        <div id="projectFormButtons">          <button id="cancelSubmition">Cancel</button>          <button id="submitProject">Submit</button>        </div>      </div>',e.appendChild(t)},deleteForm:()=>{let e=document.getElementById("formBackground");e.parentElement.removeChild(e)},fetchProjectData:()=>{const e=document.querySelector("form");return{name:e.querySelector("#name").value,description:e.querySelector("#description").value}},renderTodosHeader:(e,t,o)=>{e.querySelector("h2").textContent=t,e.querySelector("p").textContent=o},setProjectForm:e=>{for(let t in e)"todos"!=t&&(document.getElementById(t).value=e[t])},showTodoForm:()=>{let e=document.querySelector("body"),t=document.createElement("div");t.id="formBackground",t.innerHTML='<div id="todoForm">     <form action="">      <label for="name">Todo name</label>      <input type="text" id="name" />      <label for="dueDate">Due date</label>      <input type="datetime-local" id="dueDate" />      <label for="priority">Priority</label>      <select id="priority" name="priority"        ><option value="None" selected>None</option        ><option value="Low">Low</option>        <option value="Medium">Medium</option        ><option value="High">High</option>      </select>      <label for="description">Description</label>      <textarea id="description"></textarea>    </form>    <div id="todoFormButtons">      <button id="cancelSubmition">Cancel</button>      <button id="submitTodo">Submit</button>    </div>  </div>',e.appendChild(t)},fetchTodoData:()=>{const e=document.querySelector("form");return{name:e.querySelector("#name").value,description:e.querySelector("#description").value,priority:e.querySelector("#priority").value,dueDate:e.querySelector("#dueDate").value}},setTodoForm:e=>{for(let t in e)"done"!=t&&"expand"!=t&&(document.getElementById(t).value=e[t])},renderSingleTodo:t,expansionHandler:(e,t)=>{if(e.expand){let o=document.createElement("h4");o.textContent=`Priority: ${e.priority}`;let n=document.createElement("p");n.classList.add("description"),n.textContent=e.description,t.appendChild(o),t.appendChild(n),t.querySelector("i").className="up"}else t.lastChild.remove(),t.lastChild.remove(),t.querySelector("i").className="down"}}}();const i=document.getElementById("projectList"),a=document.getElementById("todosContainer");let l,c,s,u,m=!1,p=!1;function f(){c=document.querySelector(".project"),c.toggleAttribute("selected"),s=parseInt(c.getAttribute("data-index")),r.renderTodosContainer(a,l[s])}function h(e){if(!e.hasAttribute("selected")){for(c&&c.toggleAttribute("selected"),c=e,c.toggleAttribute("selected"),s=c.getAttribute("data-index");a.firstChild;)a.firstChild.remove();r.renderTodosContainer(a,l[s])}}window.addEventListener("load",()=>{l=localStorage.getItem("projects"),l?l=JSON.parse(l):(l=[],l.push(n({name:"My Project",description:"Start adding your todos!"})),l[0].todos.push(d({name:"Example",dueDate:"2/2/2020 14:40",description:"Just an example",priority:"Low"}))),r.renderProjects(i,l),l.length>0&&f()}),document.addEventListener("click",e=>{if(e.target){switch(e.target.id){case"cancelSubmition":r.deleteForm(),p=!1,m=!1;break;case"submitProject":!function(){if(p){let e=r.fetchProjectData();l[s].name=e.name,l[s].description=e.description,r.renderProjects(i,l),r.renderTodosHeader(document.getElementById("todosHeader"),l[s].name,l[s].description),p=!1,c=Array.from(i.childNodes).find(e=>e.getAttribute("data-index")==s),c.toggleAttribute("selected")}else l.push(n(r.fetchProjectData())),r.renderProjects(i,l),h(document.querySelectorAll(".project:last-child")[0]);r.deleteForm()}();break;case"deleteProject":!function(){if(l.splice(s,1),r.renderProjects(i,l),l.length>0)f();else{for(;a.firstChild;)a.firstChild.remove();let e=document.createElement("div");e.textContent="You don't have any project. Add one!",e.style.textAlign="center",e.style.margin="0 auto",a.appendChild(e)}}();break;case"editProject":p=!0,r.showProjectForm(),r.setProjectForm(l[s]);break;case"submitTodo":!function(){let e=r.fetchTodoData();m?(l[s].todos[u]=d(r.fetchTodoData(),l[s].todos[u].done),r.renderSingleTodo(l[s].todos[u],Array.from(document.querySelectorAll(".todo")).find(e=>e.getAttribute("data-index")==u)),m=!1):(l[s].todos.push(new d(e)),r.renderTodos(document.getElementById("todoList"),l[s])),r.deleteForm()}();break;case"addProject":r.showProjectForm();break;case"addTodo":r.showTodoForm();break;default:e.target.parentNode.classList.contains("project")?h(e.target.parentNode):e.target.classList.contains("checkmark")?(t=e.target.closest(".todo"),l[s].todos[parseInt(t.getAttribute("data-index"))].done=!l[s].todos[parseInt(t.getAttribute("data-index"))].done):e.target.classList.contains("edit")?(u=parseInt(e.target.closest(".todo").getAttribute("data-index")),m=!0,r.showTodoForm(),r.setTodoForm(l[s].todos[u])):e.target.classList.contains("delete")?(u=parseInt(e.target.closest(".todo").getAttribute("data-index")),l[s].todos.splice(u,1),r.renderTodos(document.getElementById("todoList"),l[s])):"I"==e.target.nodeName&&(u=parseInt(e.target.closest(".todo").getAttribute("data-index")),l[s].todos[u].expand=!l[s].todos[u].expand,r.renderSingleTodo(l[s].todos[u],Array.from(document.querySelectorAll(".todo")).find(e=>e.getAttribute("data-index")==u)))}localStorage.setItem("projects",JSON.stringify(l))}var t})}]);